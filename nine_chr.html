<!DOCTYPE html>
<!-- saved from url=(0104)https://page.gensparksite.com/jupyter/tooluse__q-MiMIvTvarLT4eM9nASg/output/OliveWine-Complete-v1.5.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9ê°€ì§€ ì„±ê²©, 9ê°€ì§€ ì™€ì¸ ì„±ê²©ê²€ì‚¬ - v1.5</title>
    <script src="./9á„€á…¡á„Œá…µ á„‰á…¥á†¼á„€á…§á†¨, 9á„€á…¡á„Œá…µ á„‹á…ªá„‹á…µá†« á„‰á…¥á†¼á„€á…§á†¨á„€á…¥á†·á„‰á…¡ - v1.5_files/jspdf.umd.min.js"></script>
    <script src="./9á„€á…¡á„Œá…µ á„‰á…¥á†¼á„€á…§á†¨, 9á„€á…¡á„Œá…µ á„‹á…ªá„‹á…µá†« á„‰á…¥á†¼á„€á…§á†¨á„€á…¥á†·á„‰á…¡ - v1.5_files/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #556B2F, #6B8E23);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .subtitle {
            font-size: 18px;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #556B2F;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-top: 20px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }

        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #556B2F;
            padding: 20px;
            margin: 20px 0;
            line-height: 1.8;
        }

        .question-container {
            text-align: center;
            margin: 40px 0;
        }

        .question-number {
            font-size: 18px;
            color: #556B2F;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 22px;
            color: #333;
            margin-bottom: 40px;
            line-height: 1.6;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .scale-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .scale-option {
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .scale-option:hover {
            transform: scale(1.05);
        }

        .scale-option input[type="radio"] {
            width: 25px;
            height: 25px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .scale-label {
            font-size: 14px;
            color: #555;
            font-weight: 500;
            line-height: 1.3;
        }

        .scale-option.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #556B2F, #6B8E23);
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            font-weight: bold;
            color: #556B2F;
        }

        .button {
            background: linear-gradient(135deg, #556B2F, #6B8E23);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(85, 107, 47, 0.3);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .button-secondary {
            background: #6c757d;
        }

        .button-container {
            text-align: center;
            margin-top: 30px;
        }

        .result-container {
            text-align: center;
            padding: 40px;
        }

        .result-type {
            font-size: 32px;
            color: #556B2F;
            font-weight: bold;
            margin: 20px 0;
        }

        .result-image {
            width: 120px;
            height: 120px;
            margin: 20px auto;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .result-description {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .warning {
            color: #dc3545;
            font-weight: bold;
            margin-top: 10px;
        }

        .admin-container {
            padding: 20px;
        }

        .response-item {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .response-item:hover {
            background: #e9ecef;
        }

        .chart-container {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .bar {
            height: 30px;
            margin: 5px 0;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .bar-label {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: white;
            z-index: 1;
        }

        .bar-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: white;
            z-index: 1;
        }

        .hidden {
            display: none;
        }

        .pdf-chart {
            font-family: Arial, sans-serif;
            background: white;
            padding: 20px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">ğŸ· 9ê°€ì§€ ì„±ê²©, 9ê°€ì§€ ì™€ì¸ ì €ì„œì™€ í•¨ê»˜í•˜ëŠ” ë‚˜ì˜ ìœ í˜•ì€?</div>
            <div class="subtitle">ì„±ê²© ìœ í˜• ê²€ì‚¬</div>
        </div>

        <!-- ë©”ì¸ í˜ì´ì§€ -->
        <div id="mainPage" class="page">
            <div class="content">
                <div class="button-container">
                    <button class="button" onclick="showUserInfo()">ê²€ì‚¬ ì‹œì‘í•˜ê¸°</button>
                    <button class="button button-secondary" onclick="showAdminLogin()">ê´€ë¦¬ì ëª¨ë“œ</button>
                </div>
            </div>
        </div>

        <!-- ì‚¬ìš©ì ì •ë³´ ì…ë ¥ í˜ì´ì§€ -->
        <div id="userInfoPage" class="page active">
            <div class="content">
                <h2>ê¸°ë³¸ ì •ë³´ ì…ë ¥</h2>

                <div class="info-box">
                    ë³¸ ì„¤ë¬¸ì§€ëŠ” 9ê°€ì§€ ì„±ê²©, 9ê°€ì§€ ì™€ì¸ì„ ìœ„í•œ ì„±ê²©ê²€ì‚¬ì§€ ì…ë‹ˆë‹¤.<br>
                    * ìì‹ ì´ ì‚¬íšŒí™”ê°€ ë§ì´ ë˜ì§€ ì•Šì•˜ë˜ ì‹œì ˆì„ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ ì†”ì§í•œ ë‹µë³€ì„ ì£¼ì‹œë©´ ê²€ì‚¬ì§€ì˜ ì‹ ë¢°ì„±ì´ ë†’ì•„ì§€ë‹ˆ ì´ ì ì„ ì°¸ê³ í•˜ì…”ì„œ ì§„í–‰í•´ ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.<br>
                    * ë³¸ ì„¤ë¬¸ì€ ì´ 81ë¬¸í•­ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆê³ , 5ì  ì²™ë„ ì¤‘ ê°€ê¸‰ì  ë³´í†µ(3ì )ì ìˆ˜ëŠ” í”¼í•´ì„œ ì„ íƒí•´ ì£¼ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤. (ì¢€ ë” ì •í™•í•œ ì¸¡ì •ê³¼ ë™ì  ë°©ì§€ë¥¼ ìœ„í•´ ì¤‘ê°„ ìˆ˜ì¸ 3. ë³´í†µì´ë‹¤ëŠ” ì²´í¬ íšŸìˆ˜ë¥¼ 10íšŒ ë¯¸ë§Œìœ¼ë¡œ ì œí•œì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.)
                </div>

                <form id="userForm">
                    <div class="form-group">
                        <label for="name">ì´ë¦„ *</label>
                        <input type="text" id="name" required="">
                    </div>

                    <div class="form-group">
                        <label for="email">ì´ë©”ì¼ *</label>
                        <input type="email" id="email" required="">
                    </div>

                    <div class="form-group">
                        <label for="phone">ì „í™”ë²ˆí˜¸ *</label>
                        <input type="tel" id="phone" required="">
                    </div>

                    <div class="form-group">
                        <label for="gender">ì„±ë³„ *</label>
                        <select id="gender" required="">
                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                            <option value="male">ë‚¨ì„±</option>
                            <option value="female">ì—¬ì„±</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="age">ë‚˜ì´ *</label>
                        <input type="number" id="age" min="1" max="120" required="">
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="consent" required="">
                        <label for="consent">ê°œì¸ì •ë³´ ì œê³µì— ë™ì˜í•©ë‹ˆë‹¤ *</label>
                    </div>
                </form>

                <div class="button-container">
                    <button class="button button-secondary" onclick="showMain()">ì´ì „</button>
                    <button class="button" onclick="startSurvey()">ê²€ì‚¬ ì‹œì‘</button>
                </div>
            </div>
        </div>

        <!-- ì„¤ë¬¸ í˜ì´ì§€ -->
        <div id="surveyPage" class="page">
            <div class="content">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">1 / 81</div>
                </div>

                <div class="question-container">
                    <div class="question-number" id="questionNumber">ì§ˆë¬¸ 1</div>
                    <div class="question-text" id="questionText"></div>

                    <div class="scale-container">
                        <div class="scale-option" onclick="selectAnswer(1)">
                            <input type="radio" name="answer" value="1" id="answer1">
                            <div class="scale-label">ì „í˜€<br>ê·¸ë ‡ì§€ ì•Šë‹¤</div>
                        </div>
                        <div class="scale-option" onclick="selectAnswer(2)">
                            <input type="radio" name="answer" value="2" id="answer2">
                            <div class="scale-label">ê·¸ë ‡ì§€<br>ì•Šë‹¤</div>
                        </div>
                        <div class="scale-option" onclick="selectAnswer(3)" id="neutralOption">
                            <input type="radio" name="answer" value="3" id="answer3">
                            <div class="scale-label">ë³´í†µì´ë‹¤</div>
                        </div>
                        <div class="scale-option" onclick="selectAnswer(4)">
                            <input type="radio" name="answer" value="4" id="answer4">
                            <div class="scale-label">ê·¸ë ‡ë‹¤</div>
                        </div>
                        <div class="scale-option" onclick="selectAnswer(5)">
                            <input type="radio" name="answer" value="5" id="answer5">
                            <div class="scale-label">ë§¤ìš°<br>ê·¸ë ‡ë‹¤</div>
                        </div>
                    </div>

                    <div class="warning" id="neutralWarning" style="display: none;">
                        'ë³´í†µì´ë‹¤' ì„ íƒ ê°€ëŠ¥ íšŸìˆ˜: <span id="neutralCount">10</span>íšŒ ë‚¨ìŒ
                    </div>
                </div>

                <div class="button-container">
                    <button class="button button-secondary" id="prevButton" onclick="previousQuestion()" style="display: none;">ì´ì „ ì§ˆë¬¸</button>
                </div>
            </div>
        </div>

        <!-- ê²°ê³¼ í˜ì´ì§€ (ìœ í˜•ë³„ ì´ë¯¸ì§€ ì¶”ê°€) -->
        <div id="resultPage" class="page">
            <div class="content">
                <div class="result-container">
                    <h2>ê²€ì‚¬ ì™„ë£Œ!</h2>
                    <div class="result-type" id="resultType"></div>
                    <img id="resultImage" class="result-image" src="https://page.gensparksite.com/jupyter/tooluse__q-MiMIvTvarLT4eM9nASg/output/OliveWine-Complete-v1.5.html" alt="ìœ í˜• ì´ë¯¸ì§€" style="display: none;">
                    <div class="result-description" id="resultDescription"></div>

                    <div class="button-container">
                        <button class="button" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€ -->
        <div id="adminLoginPage" class="page">
            <div class="content">
                <h2>ê´€ë¦¬ì ë¡œê·¸ì¸</h2>

                <form id="adminForm">
                    <div class="form-group">
                        <label for="adminId">ì•„ì´ë””</label>
                        <input type="text" id="adminId">
                    </div>

                    <div class="form-group">
                        <label for="adminPw">ë¹„ë°€ë²ˆí˜¸</label>
                        <input type="password" id="adminPw">
                    </div>
                </form>

                <div class="button-container">
                    <button class="button button-secondary" onclick="showMain()">ì´ì „</button>
                    <button class="button" onclick="adminLogin()">ë¡œê·¸ì¸</button>
                </div>
            </div>
        </div>

        <!-- ê´€ë¦¬ì í˜ì´ì§€ -->
        <div id="adminPage" class="page">
            <div class="content">
                <div class="admin-container">
                    <h2>ê´€ë¦¬ì í˜ì´ì§€</h2>

                    <div class="button-container">
                        <button class="button" onclick="downloadAllResponses()">ì „ì²´ì‘ë‹µ ë‹¤ìš´ë¡œë“œ</button>
                        <button class="button button-secondary" onclick="showMain()">ë©”ì¸ìœ¼ë¡œ</button>
                    </div>

                    <h3>ê°œë³„ ì‘ë‹µ ê²°ê³¼</h3>
                    <div id="responsesList"></div>
                </div>
            </div>
        </div>

        <!-- ìƒì„¸ ì‘ë‹µ ë³´ê¸° í˜ì´ì§€ (PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ì¶”ê°€) -->
        <div id="detailPage" class="page">
            <div class="content">
                <div id="detailContent"></div>

                <div class="button-container">
                    <button class="button button-secondary" onclick="showAdmin()">ê´€ë¦¬ì í˜ì´ì§€ë¡œ</button>
                    <button class="button" onclick="downloadIndividualResponse()">ê°œë³„ ë‹¤ìš´ë¡œë“œ</button>
                    <button class="button" onclick="downloadChartAsPDF()">ì ìˆ˜ë¶„í¬ PDF ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </div>
    </div>
    <script>

        // OliveWine ì„±ê²© í…ŒìŠ¤íŠ¸ v1.5 - 0ì  ì˜¤ë¥˜ ìˆ˜ì • ë²„ì „

        // ì „ì—­ ë³€ìˆ˜
        let questions = [{"type": 1, "order": 1, "question": "ë‚˜ëŠ” ë„ë•ì  ê¸°ì¤€ì´ë‚˜ ì›ì¹™ì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œë‹¤."}, {"type": 1, "order": 2, "question": "ì¼ì„ í•˜ë‹¤ê°€ ì‹¤ìˆ˜ë¥¼ í•˜ë©´ ìì±…ê°ì´ ì˜¤ë˜ ë‚¨ëŠ”ë‹¤."}, {"type": 1, "order": 3, "question": "ë‚´ ë¨¸ë¦¿ì†ì—ëŠ” ì‹¬íŒê´€ì´ ìˆì–´ì„œ ë‚˜ëŠ” ê·¸ì™€ í•¨ê»˜ ì‚´ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤."}, {"type": 1, "order": 4, "question": "ì‚¬ëŒë“¤ì—ê²Œ ë¹„ë‚œì„ ë°›ê¸°ë³´ë‹¤ ë‚´ ì–‘ì‹¬ì— ì–´ê¸‹ë‚˜ëŠ” ê²Œ ë” ì‹«ë‹¤."}, {"type": 1, "order": 5, "question": "í™”ë¥¼ ë‚´ì§€ ì•ˆìœ¼ë ¤ê³  ë…¸ë ¥í•˜ì§€ë§Œ í•œ ë²ˆ í™”ê°€ ë‚˜ë©´ ì˜¤ë˜ê°€ëŠ” í¸ì´ë‹¤. "}, {"type": 1, "order": 6, "question": "ë‚˜ëŠ” ìì„¸í•œ ë¶€ë¶„ê¹Œì§€ ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ë ¤ê³  í•˜ê³ , ê·¸ê²ƒì´ ë‚´ ì‹¤ìˆ˜ê°€ ì•„ë‹ ë•Œë¼ë„ ìˆ˜ì •í•˜ê³  ì‹¶ì€ ìœ í˜¹ì„ ëŠë‚€ë‹¤"}, {"type": 1, "order": 7, "question": "ì£¼ë³€ì— ìˆëŠ” ë¶ˆì™„ì „í•¨ì„ ë°œê²¬í•˜ê³  ê·¸ê²ƒì„ ì–´ë–»ê²Œ ê°œì„ í•  ìˆ˜ ìˆëŠ”ì§€ ìƒê°í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤."}, {"type": 1, "order": 8, "question": "ë‚´ë©´ ê¹Šìˆ™ì´ â€œì´ê±´ ì˜³ì§€ ì•Šì•„â€ë¼ëŠ” íŒë‹¨ì´ ìì£¼ ì¼ì–´ë‚œë‹¤."}, {"type": 1, "order": 9, "question": "ë‚˜ëŠ” ë‚´ ì—­í• ê³¼ ì±…ì„ì„ ë‹¤í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ê³  ë¯¿ëŠ”ë‹¤."}, {"type": 2, "order": 10, "question": "ë‚˜ëŠ” ëˆ„êµ°ê°€ë¥¼ ë„ì™€ì¤„ ìˆ˜ ìˆì„ ë•Œ ê¸°ì¨ì„ ëŠë‚€ë‹¤."}, {"type": 2, "order": 11, "question": "ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì˜ íŒŒì•…í•˜ê³ , ê·¸ë“¤ì˜ ê¸°ë¶„ì„ ë§ì¶°ì£¼ë ¤ê³  ë…¸ë ¥í•œë‹¤."}, {"type": 2, "order": 12, "question": "ë‚˜ëŠ” ì¢…ì¢… ìì‹ ì˜ í•„ìš”ë¥¼ ëŒë³´ê¸°ë³´ë‹¤ ë‹¤ë¥¸ ì‚¬ëŒì˜ í•„ìš”ë¥¼ ë¨¼ì € ì±™ê¸´ë‹¤."}, {"type": 2, "order": 13, "question": "ë‚´ê°€ ë„ì›€ì„ ì¤„ ìˆ˜ ì—†ì„ ë•Œ ì£„ì±…ê°ì„ ëŠë¼ê¸°ë„ í•œë‹¤."}, {"type": 2, "order": 14, "question": "ëˆ„êµ°ê°€ ë‚˜ë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•Šìœ¼ë©´ ë¶ˆì•ˆí•´ì§„ë‹¤."}, {"type": 2, "order": 15, "question": "ì‚¬ëŒë“¤ ì‚¬ì´ì—ì„œ ë”°ëœ»í•˜ê³  ì‚¬ë‘ë°›ëŠ” ì¡´ì¬ë¡œ ë³´ì´ê³  ì‹¶ë‹¤."}, {"type": 2, "order": 16, "question": "ë‚˜ëŠ” ê±°ì ˆë‹¹í•˜ëŠ” ê²ƒì— ëŒ€í•œ ë‘ë ¤ì›€ ë•Œë¬¸ì— 'ì•„ë‹ˆì˜¤'ë¼ê³  ë§í•˜ê¸° ì–´ë ¤ì›Œí•œë‹¤."}, {"type": 2, "order": 17, "question": "ìì‹ ì„ ì‚¬ëŒë“¤ì„ ëŒë³´ëŠ” ì‚¬ëŒ ë˜ëŠ” ì¼ì¢…ì˜ ì£¼ìµœìì™€ ê°™ì€ ì¡´ì¬ë¡œ ì—¬ê¸´ë‹¤."}, {"type": 2, "order": 18, "question": "ë‚˜ëŠ” ì‚¬ë‘ì„ ë°›ê¸° ìœ„í•´ ë‚˜ ìì‹ ì„ í¬ìƒí•  ë•Œê°€ ìˆë‹¤."}, {"type": 3, "order": 19, "question": "ë‚˜ëŠ” í•­ìƒ ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ì„±ì·¨í•˜ë ¤ê³  ë…¸ë ¥í•œë‹¤."}, {"type": 3, "order": 20, "question": "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì¸ì •ì´ë‚˜ ì¹­ì°¬ì´ ë‚˜ì—ê²Œ í° ì˜ë¯¸ê°€ ìˆë‹¤."}, {"type": 3, "order": 21, "question": "ë‚¨ë“¤ë¡œë¶€í„° ì„¤ë“ë ¥ì´ ìˆë‹¤ëŠ” ë§ì„ ë“£ëŠ”ë‹¤."}, {"type": 3, "order": 22, "question": "ì‚¬ëŒë“¤ì„ ë§Œë‚  ë•Œì—ëŠ” ë§ì€ ì„±ê³¼ë¥¼ ì˜¬ë¦¬ê³  ìˆëŠ” ì‚¬ëŒì´ë¼ëŠ” ì´ë¯¸ì§€ë¥¼ ì‹¬ì–´ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤."}, {"type": 3, "order": 23, "question": "ê°ì •ë³´ë‹¤ ê²°ê³¼ì™€ ì„±ê³¼ì— ì§‘ì¤‘í•˜ëŠ” í¸ì´ë‹¤."}, {"type": 3, "order": 24, "question": "ì²«ì¸ìƒì€ ì•„ì£¼ ì¤‘ìš”í•˜ê³  ë‚˜ëŠ” ìƒí™©ì— ë§ê²Œ ë‚´ ì´ë¯¸ì§€ë¥¼ ì¡°ì ˆí•  ì¤„ ì•ˆë‹¤."}, {"type": 3, "order": 25, "question": "í•­ìƒ ëª©í‘œë¥¼ ëª…í™•íˆ ì„¤ì •í•˜ê³  ì„±ê³¼ë¥¼ ê±°ë‘ê¸° ìœ„í•´ ë‹¹ì¥ í•´ì•¼ í•  ì¼ì´ ë¬´ì—‡ì¸ì§€ ì˜ ì•Œê³  ìˆë‹¤."}, {"type": 3, "order": 26, "question": "ì‹œê°„ì„ ë‚­ë¹„í•˜ëŠ” ê²ƒì´ ê²¬ë””ê¸° í˜ë“¤ë‹¤."}, {"type": 3, "order": 27, "question": "ì„±ê³¼ë¥¼ ë‚´ì§€ ëª»í–ˆì„ ë•Œ ìŠ¤ìŠ¤ë¡œë¥¼ ëª°ì•„ë¶™ì¸ë‹¤."}, {"type": 4, "order": 28, "question": "ë‚˜ëŠ” ë‚˜ë§Œì˜ ê°ì •ê³¼ ì •ì²´ì„±ì„ ë§¤ìš° ì¤‘ìš”í•˜ê²Œ ì—¬ê¸´ë‹¤."}, {"type": 4, "order": 29, "question": "ìƒì§•ì ì¸ ê²ƒ(ì‹œ, ë¹„ìœ , ì˜ˆìˆ  ë“±)ì— ë§ˆìŒì´ ëŒë¦°ë‹¤."}, {"type": 4, "order": 30, "question": "í‰ë²”í•˜ê±°ë‚˜ ëª¨ë°©ì ì¸ ì‚¶ì— ê¹Šì€ ì €í•­ê°ì„ ëŠë‚€ë‹¤."}, {"type": 4, "order": 31, "question": "ê°ì •ì˜ ê¹Šì´ì™€ ë³µì¡í•¨ì´ ë‚´ ì‚¶ì„ ì˜ë¯¸ ìˆê²Œ ë§Œë“ ë‹¤."}, {"type": 4, "order": 32, "question": "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë‚˜ë§Œí¼ ì‚¬ë¬¼ì„ ê¹Šì´ ìˆê²Œ ì´í•´í•˜ì§€ ëª»í•œë‹¤."}, {"type": 4, "order": 33, "question": "ì¼ë°˜ì ì´ê³  ì§„ë¶€í•œ í‘œí˜„ìœ¼ë¡œëŠ” ìì‹ ì˜ ê°ì •ì„ ì¶©ë¶„íˆ ë‚˜íƒ€ë‚¼ ìˆ˜ ì—†ë‹¤."}, {"type": 4, "order": 34, "question": "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì€ ë‚´ê°€ ì–´ë–»ê²Œ ëŠë¼ê³  ìˆëŠ”ì§€ëŠ” ì¢€ì²˜ëŸ¼ ì´í•´í•  ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤."}, {"type": 4, "order": 35, "question": "ë¹„êµë¥¼ í†µí•´ ìì‹ ì´ ë¶€ì¡±í•˜ë‹¤ê³  ëŠë¼ê¸°ë„ í•œë‹¤."}, {"type": 4, "order": 36, "question": "ê°ì •ì„ ì–µëˆ„ë¥´ê¸°ë³´ë‹¤ëŠ” í‘œí˜„í•˜ê³  ë‚˜ëˆ„ê³  ì‹¶ë‹¤."}, {"type": 5, "order": 37, "question": "ë‚˜ëŠ” í˜¼ì ìˆëŠ” ì‹œê°„ì„ ë§¤ìš° ì†Œì¤‘í•˜ê²Œ ìƒê°í•œë‹¤."}, {"type": 5, "order": 38, "question": "ì „ì²´ ìƒí™©ì„ ë‹¤ íŒŒì•… í•œ í›„ì— í–‰ë™í•˜ê³  ì‹¶ë‹¤"}, {"type": 5, "order": 39, "question": "ì§€ë‚˜ì¹œ ê°ì •ì  ìš”êµ¬ë‚˜ ì¹œë°€í•¨ì€ ë¶€ë‹´ìŠ¤ëŸ½ê²Œ ëŠê»´ì§„ë‹¤."}, {"type": 5, "order": 40, "question": "ê°ì •ë³´ë‹¤ëŠ” ë¶„ì„ê³¼ ì´í•´ë¥¼ ìš°ì„ ì‹œí•œë‹¤."}, {"type": 5, "order": 41, "question": "ë‚´ ì‚¬ì ì¸ ì˜ì—­ì´ ì¹¨ë²”ë‹¹í•  ë•Œ í° ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ëŠë‚€ë‹¤."}, {"type": 5, "order": 42, "question": "ì¤‘ìš”í•œ ì£¼ì œì— ëŒ€í•´ì„œëŠ” ì •ë³´ë¥¼ ì¶©ë¶„íˆ ì–»ìœ¼ë ¤ê³  í•˜ë©° ì •ë³´ ì—†ì´ ê°€ë³ê²Œ ì´ì•¼ê¸°í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤"}, {"type": 5, "order": 43, "question": "ê´€ê³„ì—ì„œ ë„ˆë¬´ ë§ì€ ì—ë„ˆì§€ë¥¼ ìŸìœ¼ë©´ í”¼ë¡œê°ì„ ëŠë‚€ë‹¤."}, {"type": 5, "order": 44, "question": "ì–´ë–¤ ì¼ì— ì§ì ‘ ë›°ì–´ë“¤ê¸° ì „ì— ë‚¨ë“¤ì´ í•˜ëŠ” ê²ƒì„ ê´€ì°°í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤."}, {"type": 5, "order": 45, "question": "ì¶©ë¶„íˆ ìƒê°í•  ì‹œê°„ë„ ì—†ì´ ê°‘ìê¸° ì–´ë–»ê²Œ ìƒê°í•˜ëŠëƒëŠ” ì§ˆë¬¸ì„ ë°›ìœ¼ë©´ ëŒ€ë‹µí•  ìˆ˜ê°€ ì—†ë‹¤."}, {"type": 6, "order": 46, "question": "ë‚˜ëŠ” ê±±ì •ì´ ë§ê³ , í•­ìƒ ëŒ€ë¹„ì±…ì„ ìƒê°í•´ë‘”ë‹¤."}, {"type": 6, "order": 47, "question": "ëˆ„êµ°ê°€ë¥¼ ì‹ ë¢°í•˜ê²Œ ë˜ë©´ ì˜¤ë«ë™ì•ˆ ì¶©ì„±ì„ ë‹¤í•˜ëŠ” í¸ì´ë‹¤."}, {"type": 6, "order": 48, "question": "ê¶Œìœ„ë‚˜ ì²´ê³„ê°€ ìˆìœ¼ë©´ ì‹¬ë¦¬ì ìœ¼ë¡œ ì•ˆì •ëœë‹¤."}, {"type": 6, "order": 49, "question": "ì–´ë–¤ ë¬¸ì œê°€ ì¼ì–´ë‚˜ë©´ ìµœì•…ì˜ ìƒíƒœë¥¼ ë‹¨ì •í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤."}, {"type": 6, "order": 50, "question": "ë‚˜ëŠ” ì˜ í›ˆë ¨ë˜ì–´ ìˆì–´ ì¡°ì§ì´ë‚˜ ì§‘ë‹¨ì— í—Œì‹ í•  ìˆ˜ ìˆë‹¤."}, {"type": 6, "order": 51, "question": "ê²°ì •ì„ ë‚´ë¦´ ë•Œ í™•ì‹ ì´ ì„œì§€ ì•Šìœ¼ë©´ ì˜¤ë˜ ê³ ë¯¼í•œë‹¤."}, {"type": 6, "order": 52, "question": "ë‚˜ì˜ ì„±ê³µì— ëŒ€í•´ì„œë„ ê°€ë” í‰ê°€ì ˆí•˜í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤."}, {"type": 6, "order": 53, "question": "ì™¸ë¶€ ìœ„í˜‘ìœ¼ë¡œë¶€í„° ë‚˜ë¥¼ ì§€í‚¤ëŠ” ë° ë§ì€ ì—ë„ˆì§€ë¥¼ ì“´ë‹¤."}, {"type": 6, "order": 54, "question": "ë‚˜ëŠ” ëª…í™•í•œ ì§€ì¹¨ì´ ìˆì„ ë•Œ ì¼ì˜ ëŠ¥ë¥ ì´ ì˜¤ë¥¸ë‹¤."}, {"type": 7, "order": 55, "question": "ë‚˜ëŠ” ìƒˆë¡œìš´ ê²½í—˜ê³¼ ìê·¹ì„ ëŠì„ì—†ì´ ì¶”êµ¬í•œë‹¤."}, {"type": 7, "order": 56, "question": "ë‚˜ëŠ” ì—¬í–‰, ë‹¤ì–‘í•œ ìŒì‹, í¥ë¯¸ë¡œìš´ í™œë™ìœ¼ë¡œ í•˜ë£¨ë¥¼ ì±„ì›Œì•¼ ë‚´ ì‚¶ì´ í™œê¸°ì°¨ë‹¤ê³  ëŠë‚€ë‹¤."}, {"type": 7, "order": 57, "question": "ë‚˜ëŠ” ìš°ìš¸í•˜ê±°ë‚˜ ë¶€ì •ì ì¸ ê°ì •ì„ ì˜¤ë˜ ë¶™ì¡ê¸°ë³´ë‹¤ëŠ”, ì¦ê±°ìš´ ê²½í—˜ìœ¼ë¡œ ê¸°ë¶„ì„ ì „í™˜í•˜ë ¤ í•œë‹¤."}, {"type": 7, "order": 58, "question": "ë‚˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦¬ê³  ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•˜ëŠ” ê²ƒì´, ë°˜ë³µì ì¸ ì‹¤í–‰ë³´ë‹¤ ë” í™œë ¥ì„ ì¤€ë‹¤."}, {"type": 7, "order": 59, "question": "ë‚˜ëŠ” ë¶ˆí¸í•˜ê±°ë‚˜ ì§€ë£¨í•œ ìƒí™©ì„ í”¼í•˜ê³ , ì¦‰ì‹œ ë” í¥ë¯¸ë¡œìš´ í™œë™ì´ë‚˜ ì‚¬ëŒì„ ì°¾ì•„ ë‚˜ì„ ë‹¤."}, {"type": 7, "order": 60, "question": "ë‚˜ëŠ” ë‚´ ì—ë„ˆì§€ì™€ ì¦ê±°ì›€ì„ ìµœëŒ€í•œ ì‚´ë¦´ ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ìƒê°í•˜ê³ , ê·¸ë•Œê·¸ë•Œ ê°€ì¥ ì‹ ë‚˜ëŠ” ì„ íƒì„ í•œë‹¤."}, {"type": 7, "order": 61, "question": "ë‚˜ëŠ” ì–´ë ¤ìš´ ìƒí™©ì— ì˜¤ë˜ ë¨¸ë¬´ë¥´ê¸°ë³´ë‹¤ëŠ”, ë¹ ë¥´ê²Œ ì „í™˜í•˜ì—¬ ê¸ì •ì ì´ê³  ìœ ì—°í•œ ë°©í–¥ìœ¼ë¡œ ë‚˜ì•„ê°€ë ¤ í•œë‹¤."}, {"type": 7, "order": 62, "question": "ë‚˜ëŠ” ê³ ìƒì´ë‚˜ êµí›ˆë³´ë‹¤, ë‹¤ì–‘í•œ ê²½í—˜ê³¼ ì¦ê±°ì›€ìœ¼ë¡œ ì¸ìƒì„ í’ì„±í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤."}, {"type": 7, "order": 63, "question": "ë‚˜ëŠ” ê¸°íšŒê°€ ì œí•œë˜ê±°ë‚˜ ë‚´ ì„ íƒì§€ê°€ ë§‰íˆëŠ” ìˆœê°„, ì¬ë¹¨ë¦¬ ëŒíŒŒêµ¬ë¥¼ ì°¾ì§€ ëª»í•˜ë©´ ë‹µë‹µí•¨ì„ ëŠë‚€ë‹¤."}, {"type": 8, "order": 64, "question": "ë‚˜ëŠ” ë‚˜ì˜ ì‚¶ì„ ìŠ¤ìŠ¤ë¡œ í†µì œí•˜ê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ í†µì œë°›ëŠ” ê²ƒì„ ë§¤ìš° ì‹«ì–´í•œë‹¤."}, {"type": 8, "order": 65, "question": "ë‚˜ëŠ” ì†”ì§í•˜ê³  ì§ì„¤ì ìœ¼ë¡œ ë‚´ ì˜ê²¬ì„ í‘œí˜„í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤"}, {"type": 8, "order": 66, "question": "ë‚˜ëŠ” ë‚˜ì—ê²Œ í•´ë¥¼ ë¼ì¹œ ì‚¬ëŒì—ê²Œ ë³µìˆ˜í•˜ê³  ì‹¶ì€ ì¶©ë™ì„ ëŠë‚€ë‹¤."}, {"type": 8, "order": 67, "question": "ë‚˜ëŠ” ê°•í•œ ì—ë„ˆì§€ì™€ ìì‹ ê°ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ë¦¬ë”ì˜ ì—­í• ì„ ë§¡ì„ ë•Œê°€ ë§ë‹¤."}, {"type": 8, "order": 68, "question": "ì£¼ë³€ ì‚¬ëŒë“¤ì„ ì§€ì¼œì¤˜ì•¼ í•œë‹¤ëŠ” ì±…ì„ê°ì„ ëŠë‚€ë‹¤."}, {"type": 8, "order": 69, "question": "ë¶ˆê³µí‰í•œ ìƒí™©ì—ì„œëŠ” ì¦‰ì‹œ ê°œì…í•˜ê³  ì‹¶ì€ ì¶©ë™ì´ ìˆë‹¤."}, {"type": 8, "order": 70, "question": "ìì‹ ì´ ì—°ì•½í•œ ì‚¬ëŒì²˜ëŸ¼ ë³´ì´ëŠ” ê±¸ ê²½ê³„í•œë‹¤."}, {"type": 8, "order": 71, "question": "ë‚˜ëŠ” ê°ˆë“±ì„ í”¼í•˜ê¸°ë³´ë‹¤ ì •ë©´ìœ¼ë¡œ ë¶€ë”ªí˜€ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ í•œë‹¤."}, {"type": 8, "order": 72, "question": "ë‚˜ëŠ” ìê¸°ì£¼ì¥ì´ ê°•í•œ í¸ì´ë¼ëŠ” ë§ì„ ìì£¼ ë“£ëŠ”ë‹¤."}, {"type": 9, "order": 73, "question": "ë‚˜ëŠ” ì¡°í™”ë¡œì›€ì„ ì¶”êµ¬í•˜ëŠ” í‰í™”ì£¼ì˜ìì´ë‹¤."}, {"type": 9, "order": 74, "question": "ë‚˜ëŠ” ì¢…ì¢… ë‚˜ì˜ ì§„ì •í•œ ìš•êµ¬ë‚˜ ì˜ê²¬ì´ ë¬´ì—‡ì¸ì§€ ì˜ ëª¨ë¥´ê² ë‹¤ê³  ëŠë‚€ë‹¤"}, {"type": 9, "order": 75, "question": "ë¬´ì—‡ì¸ê°€ë¥¼ ì‹œì‘í•˜ë ¤ë©´ ì™¸ë¶€ì˜ ìê·¹ì´ í•„ìš”í•˜ë‹¤."}, {"type": 9, "order": 76, "question": "ê¸´ì¥ëœ ë¶„ìœ„ê¸°ë³´ë‹¤ëŠ” í¸ì•ˆí•˜ê³  ëŠê¸‹í•œ ë¶„ìœ„ê¸°ë¥¼ ì„ í˜¸í•œë‹¤."}, {"type": 9, "order": 77, "question": "ë‚˜ëŠ” ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê°ˆë“±ì„ ê²ªëŠë‹ˆ ì°¨ë¼ë¦¬ ë‚˜ì˜ ìš•êµ¬ë¥¼ ìŠì–´ë²„ë¦¬ëŠ” í¸ì„ íƒí•œë‹¤."}, {"type": 9, "order": 78, "question": "ë‚˜ëŠ” ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²ƒì„ ì–´ë ¤ì›Œí•˜ë©°, ê²°ì •ì„ ë¯¸ë£¨ëŠ” ê²½í–¥ì´ ìˆë‹¤"}, {"type": 9, "order": 79, "question": "ë‚˜ëŠ” í¸ì•ˆí•˜ê³  ì•ˆì •ì ì¸ ì¼ìƒì„ ì„ í˜¸í•˜ë©°, ê¸‰ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”ë¥¼ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ”ë‹¤."}, {"type": 9, "order": 80, "question": "ë‚´ ì¡´ì¬ê°€ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê¸°ë¥¼ ë°”ë€ë‹¤."}, {"type": 9, "order": 81, "question": "ë‚˜ëŠ” ê°ˆë“±ë³´ë‹¤ëŠ” ì¹¨ë¬µì´ë‚˜ íšŒí”¼ë¡œ ìƒí™©ì„ ë„˜ê¸°ë ¤ í•œë‹¤."}];
        let currentQuestionIndex = 0;
        let answers = {};
        let neutralCount = 10;
        let shuffledQuestions = [];
        let userInfo = {};
        let responses = JSON.parse(localStorage.getItem('responses') || '[]');
        let currentDetailIndex = 0;

        // ìœ í˜•ë³„ ê²°ê³¼ í…ìŠ¤íŠ¸
        const typeResults = {
            1: `ë‹¹ì‹ ì€ ê¼¼ê¼¼í•˜ê³  ë˜‘ë¶€ëŸ¬ì§„ ì™„ë²½ì”¨ì˜ˆìš”.\nì •ë§ ë©‹ì§€ë„¤ìš”! ğŸŒ¸\nì—ë‹ˆì–´ê·¸ë¨ 1ë²ˆ, ê°œí˜ê°€(The Reformer)ì¸ ë‹¹ì‹ ì€\nì˜³ê³  ë°”ë¥¸ ì‚¶ì„ ì‚´ê³  ì‹¶ì€ ë§ˆìŒì´ ëˆ„êµ¬ë³´ë‹¤ ê°•í•©ë‹ˆë‹¤.\nì›ì¹™ê³¼ ì±…ì„ê°ì„ ì†Œì¤‘íˆ ì—¬ê¸°ë©° ëŠ˜ ë” ë‚˜ì€ ì™„ë²½ì„ ê¿ˆê¾¸ì§€ìš”.\në‹¤ë§Œ ë•Œë•Œë¡œ ìŠ¤ìŠ¤ë¡œì—ê²Œ ë„ˆë¬´ ì—„ê²©í•´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ,\nì˜¤ëŠ˜ì€ ìì‹ ì—ê²Œë„ ë”°ëœ»í•œ ë¯¸ì†Œ í•œ ë²ˆ ì„ ë¬¼í•´ë³´ì„¸ìš” ğŸ’•`,
            2: `ë‹¹ì‹ ì€ ê¸°ì¨ì˜ ê±°í’ˆ ì†ì— ì¶¤ì¶”ëŠ” ë”°ëœ»í•œ ìƒˆì˜ˆìš”.\nì •ë§ ë©‹ì§€êµ°ìš”! ğŸ’•\n2ë²ˆ ì¡°ë ¥ì (The Helper)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ì‚¬ë‘ë°›ê³  í•„ìš”ë¡œ ë˜ëŠ” ì¡´ì¬ê°€ ë˜ê³  ì‹¶ì€ ë§ˆìŒì´ ê°€ë“í•©ë‹ˆë‹¤.\nëˆ„êµ¬ë³´ë‹¤ ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ ê¹Šìœ¼ë©° í—Œì‹ ì ì´ì§€ìš”.\në‹¤ë§Œ, ë•Œë¡œëŠ” ìê¸° ë§ˆìŒì„ ëŒë³´ëŠ” ê²ƒë„ ìŠì§€ ë§ì•„ì£¼ì„¸ìš”. ğŸŒ·`,
            3: `ë‹¹ì‹ ì€ ë°˜ì§ë°˜ì§ ë¹›ë‚˜ëŠ” ìš°ë¦¬ì˜ ì˜ì›…ì´ì—ìš”.\nì •ë§ ë©‹ì ¸ìš”! âœ¨\n3ë²ˆ ì„±ì·¨ì (The Achiever)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ì„±ê³µê³¼ ì¸ì •ì„ í–¥í•´ í˜ì°¨ê²Œ ë‚˜ì•„ê°€ë©°, íš¨ìœ¨ì ì´ê³  ì—´ì •ì ì´ë©° ëª©í‘œ ë‹¬ì„± ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ë•Œë•Œë¡œ â€˜ì§„ì§œ ë‚˜â€™ë¥¼ ìŠì§€ ì•Šê³ \në‚´ ë§ˆìŒì„ ê¼­ ì•ˆì•„ì£¼ëŠ” ì‹œê°„ë„ í•„ìš”í•˜ë‹µë‹ˆë‹¤. ğŸŒŸ`,
            4: `ë‹¹ì‹ ì€ ê°ì„±ì„ í’ˆì€ ì‘ì€ ê³ ìŠ´ë„ì¹˜ì˜ˆìš”.\në„ˆë¬´ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œìš”! ğŸ¨\n4ë²ˆ ì˜ˆìˆ ê°€ (The Individualist)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ë…íŠ¹í•˜ê³  íŠ¹ë³„í•œ ì¡´ì¬ê°€ ë˜ê³  ì‹¶ì–´ í•˜ê³ , ê¹Šì€ ê°ì„±ê³¼ ë›°ì–´ë‚œ ë¯¸ì  ê°ê°ì„ ì§€ë…”ìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ ìê¸° ëª°ì…ê³¼ ìš°ìš¸ê° ì†ì— ê°‡íˆì§€ ì•Šë„ë¡,\nì˜¤ëŠ˜ì€ ì„¸ìƒì— ë‹¹ì‹ ì˜ ë¹›ë‚˜ëŠ” ìƒ‰ì„ ë¿Œë ¤ì£¼ì„¸ìš”. ğŸŒˆ`,
            5: `ë‹¹ì‹ ì€ ì‚´ì§ ê¹Œì¹ í•˜ì§€ë§Œ ì†ì€ ë”°ëœ»í•œ ì¸¤ë°ë ˆëë‹ˆë‹¤.\nì •ë§ ë©‹ì ¸ìš”! ğŸ¦‰\n5ë²ˆ íƒêµ¬ì (The Investigator)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ì„¸ìƒì„ ì´í•´í•˜ê³  ì§€ì‹ì„ ì†Œìœ í•˜ë ¤ëŠ” ì—´ì •ì´ í¬ê³ , ë¶„ì„ì ì´ë©° í†µì°°ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ìŠ¤ìŠ¤ë¡œë¥¼ ê³ ë¦½ì‹œí‚¤ê¸°ë³´ë‹¤ëŠ”\në§ˆìŒì„ ì¡°ê¸ˆ ì—´ì–´ ë”°ëœ»í•œ êµê°ë„ ëˆ„ë ¤ë³´ì„¸ìš”. ğŸŒ™`,
            6: `ë‹¹ì‹ ì€ ëˆˆ ì†ì—ì„œë„ ê¿‹ê¿‹ì´ í”¼ì–´ë‚˜ëŠ” ì—ë¸ë°”ì´ìŠ¤ ê°™ì•„ìš”.\nì •ë§ ë©‹ì ¸ìš”! â„ï¸ğŸŒ¸\n6ë²ˆ ì¶©ì‹¤ê°€ (The Loyalist)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ì•ˆì „ê³¼ í™•ì‹ ì„ ì¶”êµ¬í•˜ë©°,\nì¶©ì„±ì‹¬ê³¼ ìœ„ê¸° ëŒ€ì²˜ ëŠ¥ë ¥ì´ ë¹›ë‚©ë‹ˆë‹¤.\në•Œë¡œëŠ” ë¶ˆì•ˆê³¼ ì˜ì‹¬ì´ ì°¾ì•„ì˜¬ ìˆ˜ ìˆì§€ë§Œ,\nê·¸ ì•ˆì—ì„œë„ ë‹¹ì‹ ì˜ ë¯¿ìŒê³¼ ìš©ê¸°ëŠ” ëŠ˜ ë“ ë“ í•œ í˜ì´ ë©ë‹ˆë‹¤. ğŸ’«`,
            7: `ë‹¹ì‹ ì€ \'ë‚´ê°€ ì œì¼ ì˜ ë‚˜ê°€\' ë°˜ì§ì´ëŠ” ë³„ì´ì—ìš”.\nì •ë§ ë©‹ì§€êµ°ìš”! ğŸŒŸ\n7ë²ˆ ë‚™ì²œê°€, ì—´ì •ê°€ (The Enthusiast)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ì¦ê±°ì›€ê³¼ ììœ ë¥¼ ì‚¬ë‘í•˜ë©°, í™œê¸°ì°¨ê³  ë‹¤ì¬ë‹¤ëŠ¥í•˜ë©° ì°½ì¡°ì ì¸ ì—ë„ˆì§€ë¥¼ ê°€ë“ ì§€ë…”ìŠµë‹ˆë‹¤.\në‹¤ë§Œ í˜„ì‹¤ì„ í”¼í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ì ì‹œ ë©ˆì¶° \nìˆ¨ ê³ ë¥´ê¸°ë¥¼ í•´ë³´ëŠ” ê²ƒë„ ì¢‹ì•„ìš”. ğŸŒˆ`,
            8: `ë‹¹ì‹ ì€ \'ì£¼ë¨¹ ì¥ê³  ì¼ì–´ì„œëŠ” ìš©ê°í•œ ë¦¬ë”\'ì˜ˆìš”.\nì •ë§ ë©‹ì ¸ìš”! ğŸ”¥\n8ë²ˆ ë„ì „ì (The Challenger)ìœ í˜•ì¸ ë‹¹ì‹ ì€ ìì‹ ê³¼ íƒ€ì¸ì„ ì§€í‚¤ê³  í˜ì„ ë°œíœ˜í•˜ë©°, ê²°ë‹¨ë ¥ê³¼ ì§€ë„ë ¥, ì •ì˜ê°ì´ ê°€ë“í•©ë‹ˆë‹¤.\nê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” ê°•í•œ ë§ˆìŒì„ ì¡°ê¸ˆ ë‚´ë ¤ë†“ê³ ,\në”°ëœ»í•œ ë‹¤ì •í•¨ì„ ë“œëŸ¬ë‚´ë„ ê´œì°®ìŠµë‹ˆë‹¤. ğŸŒ»`,
            9: `ë‹¹ì‹ ì€ ê¿€ë‹¨ì§€ ê°™ì€ ë‹¬ì½¤í•œ ì´ì›ƒì´ì—ìš”.\nì°¸ ë©‹ì§‘ë‹ˆë‹¤! ğŸ¯ğŸŒ¼\n9ë²ˆ í‰í™”ì£¼ì˜ì (The Peacemaker)ìœ í˜•ì¸ ë‹¹ì‹ ì€ í‰í™”ì™€ ì¡°í™”ë¥¼ ì‚¬ë‘í•˜ë©°, í¬ìš©ë ¥ê³¼ ì¤‘ì¬ ëŠ¥ë ¥ìœ¼ë¡œ ì„¸ìƒì„ ì°¨ë¶„í•˜ê²Œ ê°ìŒ‰ë‹ˆë‹¤.\ní•˜ì§€ë§Œ ë¬´ê¸°ë ¥ì— ë¹ ì§€ì§€ ì•Šë„ë¡ \nì˜¤ëŠ˜ì€ ë‹¹ì‹ ì˜ ëª©ì†Œë¦¬ë„ ì†Œì¤‘íˆ ë“¤ë ¤ì£¼ì„¸ìš”. ğŸŒ™`,
        };

        // ìœ í˜•ë³„ ì´ë¯¸ì§€ URL
        const typeImages = {"1": "https://page.gensparksite.com/v1/base64_upload/9156738ee759662ef90c4579f6d3d31a", "2": "https://page.gensparksite.com/v1/base64_upload/85b44e5f373aea7937e191e0939d0b74", "3": "https://page.gensparksite.com/v1/base64_upload/e9eca28862135b0a6c943b71b7db5672", "4": "https://page.gensparksite.com/v1/base64_upload/43b6acc6baf28b4ea711215e83d62f30", "5": "https://page.gensparksite.com/v1/base64_upload/71aae062ef967489c72c598e513e2cdf", "6": "https://page.gensparksite.com/v1/base64_upload/b524b31fbd90e20cc94c9f208e0a0f5b", "7": "https://page.gensparksite.com/v1/base64_upload/e4a276a07617791ead7344246967634b", "8": "https://page.gensparksite.com/v1/base64_upload/2398820fa31e36aaf43f26775ea2be75", "9": "https://page.gensparksite.com/v1/base64_upload/f8c248e91f3b42d019c9a113ea762364"};

        // í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜ë“¤
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function showMain() {
            showPage('mainPage');
        }

        function showUserInfo() {
            showPage('userInfoPage');
        }

        function showAdminLogin() {
            showPage('adminLoginPage');
        }

        function showAdmin() {
            showPage('adminPage');
            loadResponsesList();
        }

        // ì„¤ë¬¸ ì‹œì‘
        function startSurvey() {
            const form = document.getElementById('userForm');
            const consent = document.getElementById('consent').checked;

            if (!form.checkValidity() || !consent) {
                alert('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ê³  ë™ì˜í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì‚¬ìš©ì ì •ë³´ ì €ì¥
            userInfo = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                gender: document.getElementById('gender').value,
                age: document.getElementById('age').value,
                startTime: new Date().toISOString()
            };

            // ì§ˆë¬¸ ìˆœì„œ ëœë¤í™”
            shuffledQuestions = [...questions];
            for (let i = shuffledQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
            }

            currentQuestionIndex = 0;
            answers = {};
            neutralCount = 10;

            showPage('surveyPage');
            displayQuestion();
        }

        // ì§ˆë¬¸ í‘œì‹œ
        function displayQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];

            document.getElementById('questionNumber').textContent = `ì§ˆë¬¸ ${currentQuestionIndex + 1}`;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('progressText').textContent = `${currentQuestionIndex + 1} / 81`;
            document.getElementById('progressFill').style.width = `${((currentQuestionIndex + 1) / 81) * 100}%`;

            // ì´ì „ ë‹µë³€ì´ ìˆìœ¼ë©´ í‘œì‹œ
            const prevAnswer = answers[currentQuestionIndex];
            if (prevAnswer) {
                document.getElementById(`answer${prevAnswer}`).checked = true;
            } else {
                document.querySelectorAll('input[name="answer"]').forEach(input => {
                    input.checked = false;
                });
            }

            // ì´ì „ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('prevButton').style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';

            // ì¤‘ë¦½ ì„ íƒ ì œí•œ
            const neutralOption = document.getElementById('neutralOption');
            if (neutralCount <= 0 && (!prevAnswer || prevAnswer !== 3)) {
                neutralOption.classList.add('disabled');
                document.getElementById('answer3').disabled = true;
            } else {
                neutralOption.classList.remove('disabled');
                document.getElementById('answer3').disabled = false;
            }

            document.getElementById('neutralCount').textContent = neutralCount;
            document.getElementById('neutralWarning').style.display = neutralCount <= 3 ? 'block' : 'none';
        }

        // ë‹µë³€ ì„ íƒ (ìë™ ë„˜ì–´ê°€ê¸°)
        function selectAnswer(value) {
            const prevAnswer = answers[currentQuestionIndex];

            // ì¤‘ë¦½ ì„ íƒ ì œí•œ ì²´í¬
            if (value === 3 && neutralCount <= 0 && prevAnswer !== 3) {
                return;
            }

            // ì¤‘ë¦½ ì„ íƒ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
            if (prevAnswer === 3 && value !== 3) {
                neutralCount++;
            } else if (prevAnswer !== 3 && value === 3) {
                neutralCount--;
            }

            answers[currentQuestionIndex] = value;
            document.getElementById(`answer${value}`).checked = true;

            // ì ì‹œ ëŒ€ê¸° í›„ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì§ˆë¬¸ìœ¼ë¡œ ì´ë™
            setTimeout(() => {
                nextQuestion();
            }, 500);
        }

        // ë‹¤ìŒ ì§ˆë¬¸
        function nextQuestion() {
            if (currentQuestionIndex < 80) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                finishSurvey();
            }
        }

        // ì´ì „ ì§ˆë¬¸
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        // ì„¤ë¬¸ ì™„ë£Œ (ìœ í˜•ë³„ ì´ë¯¸ì§€ í‘œì‹œ ì¶”ê°€)
        
        // ë‹µë³€ ê²€ì¦ í•¨ìˆ˜ - v1.2 0ì  ì˜¤ë¥˜ ë°©ì§€
        function validateAnswers() {
            console.log('=== ë‹µë³€ ê²€ì¦ ì‹œì‘ ===');
            let hasError = false;
            for (let i = 0; i < 81; i++) {
                const score = answers[i];
                if (score === 0 || score === undefined || score === null) {
                    console.warn(`Q${i+1}: ì˜ëª»ëœ ì ìˆ˜ (${score}) â†’ 1ì ìœ¼ë¡œ ìˆ˜ì •`);
                    answers[i] = 1;
                    hasError = true;
                } else if (score < 1 || score > 5) {
                    console.warn(`Q${i+1}: ë²”ìœ„ ë²—ì–´ë‚¨ (${score}) â†’ 1ì ìœ¼ë¡œ ìˆ˜ì •`);
                    answers[i] = 1;
                    hasError = true;
                }
            }

            if (hasError) {
                console.log('ğŸ”§ ë‹µë³€ ê²€ì¦ ì™„ë£Œ: ì˜¤ë¥˜ ìˆ˜ì •ë¨');
            } else {
                console.log('âœ… ë‹µë³€ ê²€ì¦ ì™„ë£Œ: ëª¨ë“  ë‹µë³€ ì •ìƒ');
            }
        }

        function finishSurvey() {
            
            // ë‹µë³€ ê²€ì¦ ì‹¤í–‰
            validateAnswers();

            // ì ìˆ˜ ê³„ì‚°
            const typeScores = {};
            for (let i = 1; i <= 9; i++) {
                typeScores[i] = 0;
            }

            for (let i = 0; i < 81; i++) {
                const question = shuffledQuestions[i];
                const score = Math.max(answers[i] || 1, 1); // ìµœì†Œê°’ 1ì  ë³´ì¥
                typeScores[question.type] += score;
            }

            // ìµœê³  ì ìˆ˜ ìœ í˜• ì°¾ê¸°
            let maxScore = 0;
            let resultType = 1;
            for (let type in typeScores) {
                if (typeScores[type] > maxScore) {
                    maxScore = typeScores[type];
                    resultType = parseInt(type);
                }
            }

            // ê²°ê³¼ ì €ì¥
            const result = {
                ...userInfo,
                completedTime: new Date().toISOString(),
                answers: {...answers},
                shuffledQuestions: [...shuffledQuestions],
                typeScores: typeScores,
                resultType: resultType,
                maxScore: maxScore
            };

            // ì¤‘ë³µ ì €ì¥ ë°©ì§€: ê°™ì€ ì‚¬ìš©ìì˜ ì‘ë‹µì´ ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸
            const existingIndex = responses.findIndex(r => 
                r.name === userInfo.name && 
                r.email === userInfo.email && 
                Math.abs(new Date(r.timestamp) - new Date()) < 60000 // 1ë¶„ ë‚´ ì¤‘ë³µ ë°©ì§€
            );

            if (existingIndex === -1) {
                // ì¤‘ë³µì´ ì•„ë‹Œ ê²½ìš°ì—ë§Œ ì €ì¥
                responses.push(result);
                localStorage.setItem('responses', JSON.stringify(responses));
                console.log('ìƒˆë¡œìš´ ì‘ë‹µ ì €ì¥ë¨');
            } else {
                // ì¤‘ë³µì¸ ê²½ìš° ê¸°ì¡´ ì‘ë‹µ ì—…ë°ì´íŠ¸
                responses[existingIndex] = result;
                localStorage.setItem('responses', JSON.stringify(responses));
                console.log('ê¸°ì¡´ ì‘ë‹µ ì—…ë°ì´íŠ¸ë¨');
            }

            // ê²°ê³¼ í‘œì‹œ (ì´ë¯¸ì§€ í¬í•¨)
            document.getElementById('resultType').textContent = `ìœ í˜• ${resultType}`;

            // ìœ í˜•ë³„ ì´ë¯¸ì§€ í‘œì‹œ
            const resultImage = document.getElementById('resultImage');
            if (typeImages[resultType]) {
                resultImage.src = typeImages[resultType];
                resultImage.style.display = 'block';
            }

            document.getElementById('resultDescription').innerHTML = typeResults[resultType];

            showPage('resultPage');
        }

        // ê´€ë¦¬ì ë¡œê·¸ì¸
        function adminLogin() {
            const id = document.getElementById('adminId').value;
            const pw = document.getElementById('adminPw').value;

            if (id === 'signet' && pw === '0688') {
                showAdmin();
            } else {
                alert('ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.');
            }
        }

        // ì‘ë‹µ ëª©ë¡ ë¡œë“œ
        
        // ì‘ë‹µ ë°ì´í„° ì €ì¥
        function saveResponses() {
            localStorage.setItem('responses', JSON.stringify(responses));
        }

        // ê°œë³„ ì‘ë‹µ ì‚­ì œ í•¨ìˆ˜
        function deleteResponse(index) {
            if (confirm('ì •ë§ë¡œ ì´ ì‘ë‹µì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                responses[index].deleted = true;
                saveResponses();
                loadResponsesList();
            }
        }

function loadResponsesList() {
            const list = document.getElementById('responsesList');
            list.innerHTML = '';

            if (responses.length === 0) {
                list.innerHTML = '<p>ì•„ì§ ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            // ì¤‘ë³µ ì œê±°: ê°™ì€ ì‚¬ìš©ì(ì´ë¦„+ì´ë©”ì¼)ì˜ ì‘ë‹µ ì¤‘ ê°€ì¥ ìµœê·¼ ê²ƒë§Œ í‘œì‹œ
            const uniqueResponses = [];
            const seenUsers = new Set();

            // ìµœì‹  ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´ì„œ ì›ë³¸ ì¸ë±ìŠ¤ ë³´ì¡´
            const responsesWithIndex = responses.map((response, index) => ({...response, originalIndex: index}));
            const sortedResponses = responsesWithIndex.sort((a, b) => {
                const timeA = new Date(a.completedTime || 0);
                const timeB = new Date(b.completedTime || 0);
                return timeB - timeA; // ë‚´ë¦¼ì°¨ìˆœ (ìµœì‹ ìˆœ)
            });

            sortedResponses.forEach((response) => {
                // ì‚­ì œëœ ì‘ë‹µì€ ì œì™¸
                if (response.deleted) return;

                // ì‚¬ìš©ì ì‹ë³„ì (ì´ë¦„+ì´ë©”ì¼)
                const userKey = `${response.name}|${response.email}`;

                // ì´ë¯¸ ì²˜ë¦¬ëœ ì‚¬ìš©ìê°€ ì•„ë‹Œ ê²½ìš°ë§Œ ì¶”ê°€ (ìµœì‹  ì‘ë‹µë§Œ)
                if (!seenUsers.has(userKey)) {
                    seenUsers.add(userKey);
                    uniqueResponses.push(response);
                }
            });

            uniqueResponses.forEach((response) => {
                const item = document.createElement('div');
                item.className = 'response-item';
                item.style.position = 'relative';
                item.innerHTML = `
                    <strong>${response.name}</strong><br>
                    ê²€ì‚¬ì‹œê°„: ${new Date(response.completedTime).toLocaleString()}<br>
                    ê²°ê³¼: ìœ í˜• ${response.resultType}
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteResponse(${response.originalIndex});" style="position: absolute; top: 5px; right: 5px; background: #ff4444; color: white; border: none; border-radius: 3px; padding: 2px 8px; cursor: pointer; font-size: 12px;">ì‚­ì œ</button>
                `;
                item.onclick = () => showDetail(response.originalIndex);
                list.appendChild(item);
            });
        }

        // ìƒì„¸ ë³´ê¸°
        function showDetail(index) {
            currentDetailIndex = index;
            const response = responses[index];

            let html = `
                <h2>${response.name}ë‹˜ì˜ ìƒì„¸ ê²°ê³¼</h2>
                <p><strong>ê²€ì‚¬ì‹œê°„:</strong> ${new Date(response.completedTime).toLocaleString()}</p>
                <p><strong>ìµœì¢… ìœ í˜•:</strong> ${response.resultType}</p>

                <div class="chart-container" id="chartContainer">
                    <h3>ìœ í˜•ë³„ ì ìˆ˜ ë¶„í¬</h3>
            `;

            // ìƒ‰ìƒ ë°°ì—´
            const colors = [
                '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',
                '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE'
            ];

            for (let type = 1; type <= 9; type++) {
                const score = response.typeScores[type];
                const maxPossible = 45; // 9ë¬¸í•­ Ã— 5ì 
                const percentage = (score / maxPossible) * 100;

                html += `
                    <div class="bar" style="background: ${colors[type-1]}; width: ${Math.max(percentage, 10)}%;">
                        <div class="bar-label">ìœ í˜• ${type}</div>
                        <div class="bar-value">${score}ì </div>
                    </div>
                `;
            }

            html += `
                </div>

                <h3>ìƒì„¸ ì‘ë‹µ ë³´ê¸°</h3>
                <div style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd; padding: 15px; border-radius: 8px;">
            `;

            // ì›ë˜ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ë‹µë³€ í‘œì‹œ
            for (let i = 0; i < 81; i++) {
                const originalQuestion = questions[i];

                // ì„ì¸ ì§ˆë¬¸ì—ì„œ í•´ë‹¹ ì§ˆë¬¸ì˜ ì¸ë±ìŠ¤ ì°¾ê¸°
                const shuffledIndex = response.shuffledQuestions.findIndex(q => 
                    q.type === originalQuestion.type && q.order === originalQuestion.order
                );

                const answer = response.answers[shuffledIndex] || 0;
                const answerTexts = ['', 'ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤', 'ê·¸ë ‡ì§€ ì•Šë‹¤', 'ë³´í†µì´ë‹¤', 'ê·¸ë ‡ë‹¤', 'ë§¤ìš° ê·¸ë ‡ë‹¤'];

                html += `
                    <p><strong>Q${i+1} (ìœ í˜•${originalQuestion.type}):</strong> ${originalQuestion.question}</p>
                    <p><strong>ë‹µë³€:</strong> ${answer}ì  (${answerTexts[answer]})</p>
                    <hr style="margin: 10px 0;">
                `;
            }

            html += '</div>';

            document.getElementById('detailContent').innerHTML = html;
            showPage('detailPage');
        }

        // PDF ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ (ì ìˆ˜ë¶„í¬ ì°¨íŠ¸)
        async function downloadChartAsPDF() {
            const response = responses[currentDetailIndex];
            if (!response) {
                alert('ì‘ë‹µ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                // jsPDF ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();

                // PDF ì œëª© ì¶”ê°€
                pdf.setFontSize(18);
                pdf.text(`${response.name}ë‹˜ì˜ ì„±ê²© ìœ í˜• ê²€ì‚¬ ê²°ê³¼`, 20, 30);

                // ê²€ì‚¬ ì •ë³´ ì¶”ê°€
                pdf.setFontSize(12);
                pdf.text(`ê²€ì‚¬ ì‹œê°„: ${new Date(response.completedTime).toLocaleString()}`, 20, 45);
                pdf.text(`ìµœì¢… ìœ í˜•: ìœ í˜• ${response.resultType}`, 20, 55);

                // ì°¨íŠ¸ ì˜ì—­ì„ ìº”ë²„ìŠ¤ë¡œ ë³€í™˜
                const chartContainer = document.getElementById('chartContainer');
                const canvas = await html2canvas(chartContainer, {
                    backgroundColor: '#ffffff',
                    scale: 2
                });

                // ìº”ë²„ìŠ¤ ì´ë¯¸ì§€ë¥¼ PDFì— ì¶”ê°€
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 170;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                pdf.addImage(imgData, 'PNG', 20, 70, imgWidth, imgHeight);

                // ìœ í˜•ë³„ ì ìˆ˜ í‘œ ì¶”ê°€
                let yPosition = 70 + imgHeight + 20;
                pdf.setFontSize(14);
                pdf.text('ìœ í˜•ë³„ ìƒì„¸ ì ìˆ˜', 20, yPosition);
                yPosition += 10;

                pdf.setFontSize(10);
                const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',
                              '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE'];

                for (let type = 1; type <= 9; type++) {
                    const score = response.typeScores[type];
                    pdf.text(`ìœ í˜• ${type}: ${score}ì  (ìµœëŒ€ 45ì )`, 20, yPosition);
                    yPosition += 8;
                }

                // PDF ë‹¤ìš´ë¡œë“œ
                pdf.save(`${response.name}_ì„±ê²©ìœ í˜•ê²€ì‚¬_ì ìˆ˜ë¶„í¬.pdf`);

            } catch (error) {
                console.error('PDF ìƒì„± ì˜¤ë¥˜:', error);
                alert('PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì „ì²´ ì‘ë‹µ ë‹¤ìš´ë¡œë“œ
        function downloadAllResponses() {
            // ì‚­ì œë˜ì§€ ì•Šì€ ì‘ë‹µë§Œ í•„í„°ë§
            const activeResponses = responses.filter(response => !response.deleted);

            if (activeResponses.length === 0) {
                alert('ë‹¤ìš´ë¡œë“œí•  ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            let csvContent = "ì´ë¦„,ì´ë©”ì¼,ì „í™”ë²ˆí˜¸,ì„±ë³„,ë‚˜ì´,ê²€ì‚¬ì‹œê°„,ìµœì¢…ìœ í˜•";

            // 81ê°œ ì§ˆë¬¸ í—¤ë” ì¶”ê°€
            for (let i = 1; i <= 81; i++) {
                csvContent += `,Q${i}`;
            }

            // 9ê°œ ìœ í˜• ì ìˆ˜ í—¤ë” ì¶”ê°€
            for (let i = 1; i <= 9; i++) {
                csvContent += `,ìœ í˜•${i}ì ìˆ˜`;
            }

            csvContent += "\n";

            activeResponses.forEach(response => {
                let row = `"${response.name}","${response.email}","${response.phone}","${response.gender}","${response.age}","${new Date(response.completedTime).toLocaleString()}","${response.resultType}"`;

                // ì›ë˜ ìˆœì„œëŒ€ë¡œ ë‹µë³€ ì¶”ê°€
                for (let i = 0; i < 81; i++) {
                    const originalQuestion = questions[i];
                    const shuffledIndex = response.shuffledQuestions.findIndex(q => 
                        q.type === originalQuestion.type && q.order === originalQuestion.order
                    );
                    const answer = response.answers[shuffledIndex] || 0;
                    row += `,${answer}`;
                }

                // ìœ í˜•ë³„ ì ìˆ˜ ì¶”ê°€
                for (let i = 1; i <= 9; i++) {
                    row += `,${response.typeScores[i]}`;
                }

                csvContent += row + "\n";
            });

            downloadCSV(csvContent, 'ì „ì²´ì‘ë‹µê²°ê³¼.csv');
        }

        // ê°œë³„ ì‘ë‹µ ë‹¤ìš´ë¡œë“œ
        function downloadIndividualResponse() {
            const response = responses[currentDetailIndex];

            let csvContent = "í•­ëª©,ê°’\n";
            csvContent += `"ì´ë¦„","${response.name}"\n`;
            csvContent += `"ì´ë©”ì¼","${response.email}"\n`;
            csvContent += `"ì „í™”ë²ˆí˜¸","${response.phone}"\n`;
            csvContent += `"ì„±ë³„","${response.gender}"\n`;
            csvContent += `"ë‚˜ì´","${response.age}"\n`;
            csvContent += `"ê²€ì‚¬ì‹œê°„","${new Date(response.completedTime).toLocaleString()}"\n`;
            csvContent += `"ìµœì¢…ìœ í˜•","${response.resultType}"\n\n`;

            csvContent += "ì§ˆë¬¸ë²ˆí˜¸,ìœ í˜•,ì§ˆë¬¸ë‚´ìš©,ë‹µë³€ì ìˆ˜\n";

            for (let i = 0; i < 81; i++) {
                const originalQuestion = questions[i];
                const shuffledIndex = response.shuffledQuestions.findIndex(q => 
                    q.type === originalQuestion.type && q.order === originalQuestion.order
                );
                const answer = response.answers[shuffledIndex] || 0;

                csvContent += `"Q${i+1}","ìœ í˜•${originalQuestion.type}","${originalQuestion.question}","${answer}"\n`;
            }

            csvContent += "\nìœ í˜•,ì ìˆ˜\n";
            for (let i = 1; i <= 9; i++) {
                csvContent += `"ìœ í˜•${i}","${response.typeScores[i]}"\n`;
            }

            downloadCSV(csvContent, `${response.name}_ê°œë³„ê²°ê³¼.csv`);
        }

        // CSV ë‹¤ìš´ë¡œë“œ í—¬í¼ í•¨ìˆ˜
        function downloadCSV(csvContent, filename) {
            const BOM = "\uFEFF";
            const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    
</script>

<div class="glasp-extension-toaster" style="display: block; width: 320px; margin: unset; padding: unset; border: unset; border-radius: unset; outline: unset; background-color: unset; box-shadow: unset; position: fixed; top: 40px; right: 24px; z-index: 9999;"><template shadowrootmode="open"><div class="glasp-extension" style="font-family: inherit;"></div></template></div><div class="glasp-extension" style="display: block; width: unset; margin: unset; padding: unset; border: unset; border-radius: unset; outline: unset; background-color: unset; box-shadow: unset; position: fixed; bottom: 16px; right: 16px; z-index: 9999;"><template shadowrootmode="open"><div class="glasp-extension" style="font-family: inherit;"></div></template></div></body></html>